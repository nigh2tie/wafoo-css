<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Data Table (Enhanced) - wafoo-css</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="robots" content="noindex,nofollow">
    <link rel="stylesheet" href="../dist/wafoo.min.css">
    <style>
      body {
        margin: 0;
        padding: var(--wf-space-4);
      }
    </style>
  </head>
  <body class="theme-sakura">
    <a href="#main" class="wf-sr-only">メインコンテンツへスキップ</a>
    <header class="wf-header-noren" role="banner">
      <div class="wf-container" style="padding: 0">
        <h1>データテーブル（ソート・フィルタ機能付き）</h1>
        <p class="wf-text-sm wf-text-muted" style="margin: 4px 0 0">WFUI.dataTable APIの使用例</p>
      </div>
    </header>
    <main class="wf-container" role="main" id="main" style="margin-top: var(--wf-space-6)">
      <div class="wf-card">
        <h2>ユーザー一覧</h2>
        <div class="wf-data-table" id="user-table">
          <div class="wf-data-table__toolbar">
            <div class="wf-data-table__search">
              <input type="text" class="wf-input" placeholder="検索...">
            </div>
            <div class="wf-data-table__actions">
              <button class="wf-btn wf-btn-primary wf-btn-sm" id="refresh-btn">更新</button>
            </div>
          </div>
          <div class="wf-data-table__wrapper">
            <table class="wf-data-table__table">
              <thead>
                <tr>
                  <th>名前</th>
                  <th>年齢</th>
                  <th>メールアドレス</th>
                  <th>部署</th>
                  <th>ステータス</th>
                </tr>
              </thead>
              <tbody>
                <!-- JavaScript APIで動的に生成 -->
              </tbody>
            </table>
          </div>
          <div class="wf-data-table__footer">
            <div class="wf-data-table__info">1-10 / 50件</div>
            <div class="wf-data-table__pagination">
              <button class="wf-btn wf-btn-outline wf-btn-sm" id="prev-btn" disabled>前へ</button>
              <span class="wf-mx-2" id="page-info">1 / 5</span>
              <button class="wf-btn wf-btn-outline wf-btn-sm" id="next-btn">次へ</button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script src="../dist/wafoo.js"></script>
    <script>
      // サンプルデータ
      const sampleData = [
        { name: '山田太郎', age: 30, email: 'yamada@example.com', department: '営業部', status: 'アクティブ' },
        { name: '佐藤花子', age: 25, email: 'sato@example.com', department: '開発部', status: 'アクティブ' },
        { name: '鈴木一郎', age: 35, email: 'suzuki@example.com', department: 'マーケティング部', status: '休職中' },
        { name: '田中次郎', age: 28, email: 'tanaka@example.com', department: '営業部', status: 'アクティブ' },
        { name: '伊藤三郎', age: 32, email: 'ito@example.com', department: '開発部', status: 'アクティブ' },
        { name: '高橋四郎', age: 27, email: 'takahashi@example.com', department: '人事部', status: 'アクティブ' },
        { name: '渡辺五郎', age: 29, email: 'watanabe@example.com', department: '営業部', status: '退職' },
        { name: '中村六郎', age: 31, email: 'nakamura@example.com', department: '開発部', status: 'アクティブ' },
        { name: '小林七郎', age: 26, email: 'kobayashi@example.com', department: 'マーケティング部', status: 'アクティブ' },
        { name: '加藤八郎', age: 33, email: 'kato@example.com', department: '営業部', status: 'アクティブ' },
        { name: '吉田九郎', age: 24, email: 'yoshida@example.com', department: '開発部', status: 'アクティブ' },
        { name: '山本十郎', age: 36, email: 'yamamoto@example.com', department: '人事部', status: 'アクティブ' }
      ];

      // データテーブルの初期化
      const table = WFUI.dataTable(document.querySelector('#user-table'), {
        columns: [
          { key: 'name', label: '名前', sortable: true },
          { key: 'age', label: '年齢', sortable: true },
          { key: 'email', label: 'メールアドレス', filterable: true },
          { key: 'department', label: '部署', sortable: true },
          { key: 'status', label: 'ステータス', sortable: true }
        ],
        data: sampleData,
        sortable: true,
        filterable: true,
        pagination: true,
        pageSize: 5,
        selectable: false
      });

      // ページネーション制御
      let currentPage = 1;
      const totalPages = Math.ceil(sampleData.length / 5);

      function updatePagination() {
        document.getElementById('page-info').textContent = currentPage + ' / ' + totalPages;
        document.getElementById('prev-btn').disabled = currentPage === 1;
        document.getElementById('next-btn').disabled = currentPage === totalPages;
      }

      document.getElementById('prev-btn').addEventListener('click', function() {
        if (currentPage > 1) {
          currentPage--;
          table.setPage(currentPage);
          updatePagination();
        }
      });

      document.getElementById('next-btn').addEventListener('click', function() {
        if (currentPage < totalPages) {
          currentPage++;
          table.setPage(currentPage);
          updatePagination();
        }
      });

      document.getElementById('refresh-btn').addEventListener('click', function() {
        // データを再読み込み（サンプル）
        WFUI.snackbar.show({
          message: 'データを更新しました',
          type: 'success',
          duration: 2000
        });
      });

      updatePagination();
    </script>
  </body>
</html>

